<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <title>GORM for JPA 1.0.0.M1</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <ul>
                <li>
                    <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                        <a href="../guide/index.html" class="button">Table of contents</a>
                        <div id="nav-summary-childs" style="display:none;">
                            
                            <div class="toc-item" style="margin-left:0"><a href="#1.%20Introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#2.%20Getting%20Started"><strong>2</strong><span>Getting Started</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0"><a href="#3.%20Mapping%20Domain%20Classes%20with%20JPA"><strong>3</strong><span>Mapping Domain Classes with JPA</span></a></div>
                            
                        </div>
                    </div>
                </li>
                <li class="separator selected">
                    <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                </li>
            </ul>
        </div>
        <div id="header">
            <div class="images clearfix">
                
                
            </div>
            <p></p>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>GORM for JPA - Reference Documentation</h1>
                            <p><strong>Authors:</strong> Graeme Rocher, Burt Beckwith</p>
                            <p><strong>Version:</strong> 1.0.0.M1</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#1.%20Introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#1.1%20Compatibility%20with%20GORM%20for%20Hibernate"><strong>1.1</strong><span>Compatibility with GORM for Hibernate</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#2.%20Getting%20Started"><strong>2</strong><span>Getting Started</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#3.%20Mapping%20Domain%20Classes%20with%20JPA"><strong>3</strong><span>Mapping Domain Classes with JPA</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="1. Introduction">1 Introduction</h1>
This plugin provides an implementation of GORM ontop of the Java Persistence API 1.0.


<h2 id="1.1 Compatibility with GORM for Hibernate">1.1 Compatibility with GORM for Hibernate</h2>
This implementation tries to be as compatible as possible with GORM for Hibernate. In general you can refer to the <a href="http://grails.org/doc/latest/guide/5.%20Object%20Relational%20Mapping%20(GORM).html" target="blank">GORM documentation</a> and the "Domain Classes" section of the <a href="http://grails.org/doc/latest/" target="blank">reference guide</a> (see the left nav) for usage information.<p class="paragraph"/>The following key features are supported by GORM for Mongo:
<ul class="star">
<li>Simple persistence methods</li>
<li>Dynamic finders</li>
<li>Criteria/Where queries</li>
<li>Named queries</li>
<li>Inheritance</li>
<li>Embedded types</li>
<li>Query by example</li>
</ul><p class="paragraph"/>However, some features are not supported:
<ul class="star">
<li>HQL queries (JPA-QL queries are supported though)</li>
<li>Dirty checking methods</li>
<li>Any direct interaction with the Hibernate API</li>
<li>Custom Hibernate user types</li>
</ul><p class="paragraph"/>There may be other limitations not mentioned here so in general it shouldn't be expected that an application based on GORM for Hibernate will "just work" without some tweaking involved. Having said that, the large majority of common GORM functionality is supported.



<h1 id="2. Getting Started">2 Getting Started</h1>
To get started with GORM for JPA you need to install the plugin into a Grails application by configuring it as a dependency in <code>BuildConfig.groovy</code>:<p class="paragraph"/><div class="code"><pre>plugins &#123;
    compile <span class="java&#45;quote<a href="hibernate&#45;jpa&#45;provider:1.0.0.M1"</span>">></a>
	compile <span class="java&#45;quote<a href="gorm&#45;jpa:1.0.0.M1"</span>">></a>
&#125;</pre></div><p class="paragraph"/>Note that in this case I am using the <code>hibernate-jpa-provider</code> plugin which will set up an <code>entityManagerFactory</code> bean for me using Hibernate. If you do not wish to use Hibernate then you need to manually configure the necessary <code>entityManagerFactory</code> and <code>transactionManager</code> beans inside <code>grails-app/conf/spring/resources.groovy</code>.<p class="paragraph"/>Below is what the <code>hibernate-jpa-provider</code> plugin does to setup the necessary Spring beans:<p class="paragraph"/><div class="code"><pre>def domainClassPackages = application.domainClasses.collect &#123; it.clazz.getPackage().name &#125;.unique()
<span class="java&#45;keyword">if</span>(!domainClassPackages) domainClassPackages = &#91;application.metadata.getApplicationName()&#93;<p class="paragraph"/>entityManagerFactory(org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean) &#123;
    packagesToScan = domainClassPackages                
    dataSource = ref(<span class="java&#45;quote">"dataSource"</span>)
    jpaVendorAdapter = ref(<span class="java&#45;quote">"jpaVendorAdapter"</span>)
&#125;<p class="paragraph"/>transactionManager(org.springframework.orm.jpa.JpaTransactionManager) &#123;
    entityManagerFactory = entityManagerFactory
&#125;<p class="paragraph"/>addAlias(<span class="java&#45;quote">"jpaTransactionManager"</span>, <span class="java&#45;quote">"transactionManager"</span>)<p class="paragraph"/>jpaVendorAdapter(org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter)</pre></div><p class="paragraph"/>The above code can be put into <code>grails-app/conf/spring/resources.groovy</code> and customized as necessary.


<h1 id="3. Mapping Domain Classes with JPA">3 Mapping Domain Classes with JPA</h1>
The first step to map domain classes is to create a regular domain class:<p class="paragraph"/><div class="code"><pre>grails create&#45;domain&#45;class amazon.Book</pre></div><p class="paragraph"/>To map entities via JPA you can either use standard JPA annotations (See for example the <a href="http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html" target="blank">Hibernate documentation on the subject</a>) or you can use standard GORM syntax and use the <code>JpaEntity</code> transformation which transforms GORM entities to JPA entities at the byte code level:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">package</span> amazon<p class="paragraph"/><span class="java&#45;keyword">import</span> grails.gorm.JpaEntity;<p class="paragraph"/>@JpaEntity
class Book &#123;<p class="paragraph"/>    <span class="java&#45;object">String</span> title
    <span class="java&#45;keyword">static</span> constraints = &#123;
        title blank:<span class="java&#45;keyword">false</span>
    &#125;
&#125;</pre></div><p class="paragraph"/>The <code>JpaEntity</code> transform will automatically add the necessary <code>Entity</code>, <code>Identity</code> and association annotations (<code>OneToMany</code>, <code>OneToOne</code> etc.) based on the normal GORM syntax. 

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
